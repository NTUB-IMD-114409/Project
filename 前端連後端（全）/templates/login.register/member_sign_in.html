<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>æœƒè­°å¯¶ï½œæœƒå“¡ç™»å…¥</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body {
      background-color: #f5f8fa;
      font-family: 'Arial', sans-serif;
    }
  </style>
</head>
<body class="flex items-center justify-center min-h-screen">

  <!-- æ•´é«”æ’ç‰ˆ -->
  <div class="flex flex-row items-center justify-center w-full max-w-6xl px-6 gap-20">

    <!-- å·¦å´ Logo èˆ‡æŒ‰éˆ• -->
    <div class="flex flex-col items-center justify-center">
      <img src="../../image/logo.png" alt="æœƒè­°å¯¶ Logo" class="w-[260px] h-auto mb-10" />
      <div class="flex flex-row gap-8 text-[#205f72] text-lg font-semibold underline">
        <button onclick="openModal('featureModal')" class="hover:text-[#175c71]">åŠŸèƒ½ç°¡ä»‹</button>
        <button onclick="openModal('aboutModal')" class="hover:text-[#175c71]">é—œæ–¼æˆ‘å€‘</button>
      </div>
    </div>

    <!-- å³å´ ç™»å…¥è¡¨å–® -->
    <div class="bg-[#cedfe4] px-10 py-10 rounded-3xl shadow-md w-full max-w-md">
      <h2 class="text-3xl font-bold mb-8 text-center text-[#205f72]">æœƒå“¡ç™»å…¥</h2>
      <form onsubmit="handleLogin(event)">
        <div class="mb-4">
          <label class="block font-bold mb-1">Email</label>
          <input id="loginEmail" type="email" class="w-full p-3 rounded-lg border focus:outline-none"/>
          <p id="emailError" class="text-sm text-red-600 mt-1"></p>
        </div>
        <div class="mb-6">
          <label class="block font-bold mb-1">å¯†ç¢¼</label>
          <input id="loginPassword" type="password" class="w-full p-3 rounded-lg border focus:outline-none"/>
          <p id="passwordError" class="text-sm text-red-600 mt-1"></p>
        </div>
        <div class="text-right mb-4">
          <a href="../login.register/forgot_password.html" class="text-sm text-[#205f72] hover:underline">å¿˜è¨˜å¯†ç¢¼ï¼Ÿ</a>
        </div>
        <button type="submit" class="w-full bg-[#205f72] hover:bg-[#175c71] text-white py-3 text-lg rounded-lg">ç™»å…¥</button>
        <p class="text-sm text-center mt-4">é‚„æ²’æœ‰å¸³è™Ÿï¼Ÿ<a href="{{ url_for('signup_page') }}" class="text-[#205f72] hover:underline">ç«‹å³è¨»å†Š</a></p>
      </form>
    </div>
  </div>

  <!-- åŠŸèƒ½ç°¡ä»‹ Modal -->
  <div id="featureModal" class="fixed inset-0 hidden items-center justify-center bg-black bg-opacity-50 z-50">
    <div class="bg-white rounded-2xl p-8 max-w-md w-full shadow-xl">
      <h3 class="text-2xl font-bold text-[#205f72] mb-4 text-center">åŠŸèƒ½ç°¡ä»‹</h3>
      <ul class="space-y-2 text-base text-gray-700 list-disc list-inside">
        <li>æª”æ¡ˆä¸Šå‚³</li>
        <li>èªéŸ³è½‰æ–‡å­—</li>
        <li>æ™ºèƒ½æŸ¥è©¢</li>
        <li>æœƒè­°å›é¡§</li>
      </ul>
      <div class="text-center mt-6">
        <button onclick="closeModal('featureModal')" class="bg-[#205f72] text-white px-4 py-2 rounded-lg hover:bg-[#175c71]">é—œé–‰</button>
      </div>
    </div>
  </div>

  <!-- é—œæ–¼æˆ‘å€‘ Modalï¼ˆæœ‰ç™½åº• + ç„¡ç™½é‚Šæ¡†åœ–ç‰‡ï¼‰ -->
  <div id="aboutModal" class="fixed inset-0 hidden items-center justify-center bg-black bg-opacity-50 z-50">
    <div class="bg-white rounded-2xl p-10 max-w-6xl w-full shadow-xl">
      <h3 class="text-3xl font-bold text-[#205f72] mb-10 text-center">æˆå“¡ä»‹ç´¹</h3>
      <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-6">
        <!-- æˆå“¡å¡ç‰‡ -->
        <div class="bg-[#cedfe4] rounded-2xl p-4 text-center shadow-md flex flex-col items-center">
          <img src="../../image/yun.png" alt="å§œç­±é›²" class="w-24 h-24 rounded-full object-cover mb-3" />
          <div class="font-bold text-base text-[#143139]">å§œç­±é›²</div>
          <div class="text-sm text-black">11146065@ntub.edu.tw</div>
        </div>
        <div class="bg-[#cedfe4] rounded-2xl p-4 text-center shadow-md flex flex-col items-center">
          <img src="../../image/kiki.png" alt="é€£æ¹˜çª" class="w-24 h-24 rounded-full object-cover mb-3" />
          <div class="font-bold text-base text-[#143139]">é€£æ¹˜çª</div>
          <div class="text-sm text-black">11146067@ntub.edu.tw</div>
        </div>
        <div class="bg-[#cedfe4] rounded-2xl p-4 text-center shadow-md flex flex-col items-center">
          <img src="../../image/chi.png" alt="é‚µç´«ç¶º" class="w-24 h-24 rounded-full object-cover mb-3" />
          <div class="font-bold text-base text-[#143139]">é‚µç´«ç¶º</div>
          <div class="text-sm text-black">11146074@ntub.edu.tw</div>
        </div>
        <div class="bg-[#cedfe4] rounded-2xl p-4 text-center shadow-md flex flex-col items-center">
          <img src="../../image/yu.png" alt="ææ›¼éˆº" class="w-24 h-24 rounded-full object-cover mb-3" />
          <div class="font-bold text-base text-[#143139]">ææ›¼éˆº</div>
          <div class="text-sm text-black">11146079@ntub.edu.tw</div>
        </div>
        <div class="bg-[#cedfe4] rounded-2xl p-4 text-center shadow-md flex flex-col items-center">
          <img src="../../image/ya.png" alt="èŒƒé›…æ·‡" class="w-24 h-24 rounded-full object-cover mb-3" />
          <div class="font-bold text-base text-[#143139]">èŒƒé›…æ·‡</div>
          <div class="text-sm text-black">11146082@ntub.edu.tw</div>
        </div>
      </div>
      <div class="text-center mt-10">
        <button onclick="closeModal('aboutModal')" class="bg-[#205f72] text-white px-6 py-3 rounded-lg hover:bg-[#175c71]">é—œé–‰</button>
      </div>
    </div>
  </div>

  <!-- JS æ§åˆ¶å€ -->
  <script>
    function handleLogin(event) {
      event.preventDefault();
      const email = document.getElementById("loginEmail");
      const password = document.getElementById("loginPassword");
      const emailError = document.getElementById("emailError");
      const passwordError = document.getElementById("passwordError");

      emailError.textContent = "";
      passwordError.textContent = "";

      const emailPattern = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
      const pwPattern = /^(?=.*[a-z])(?=.*[A-Z])(?=.*\d).{8,}$/;
      let valid = true;

if (!email.value.trim()) {
  emailError.textContent = "è«‹è¼¸å…¥ Email";
  valid = false;
} else if (!emailPattern.test(email.value.trim())) {
  emailError.textContent = "Email æ ¼å¼éŒ¯èª¤ï¼Œè«‹é‡æ–°è¼¸å…¥";
  valid = false;
}

      if (!password.value) {
        passwordError.textContent = "è«‹è¼¸å…¥å¯†ç¢¼";
        valid = false;
      } else if (!pwPattern.test(password.value)) {
        passwordError.textContent = "å¯†ç¢¼æ ¼å¼éŒ¯èª¤ï¼Œè«‹ç¢ºèªæ˜¯å¦åŒ…å«è‹±æ–‡å¤§å°å¯«èˆ‡æ•¸å­—ï¼Œè‡³å°‘ 8 ç¢¼";
        valid = false;
      }
      function openModal(id) {
      document.getElementById(id).classList.remove('hidden');
      document.getElementById(id).classList.add('flex');
    }

    function closeModal(id) {
      document.getElementById(id).classList.remove('flex');
      document.getElementById(id).classList.add('hidden');
    }
      if (valid) {
      const data = {
        email: email.value.trim(),
        password: password.value
      };

          fetch("/api/signin", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify(data)
    })
      .then(res => res.json())
      .then(result => {
        if (result.success) {
          // ğŸ”¥ å„²å­˜ä½¿ç”¨è€…è³‡æ–™
          localStorage.setItem("userId", result.user.id);
          localStorage.setItem("userName", result.user.name);

          alert("ç™»å…¥æˆåŠŸï¼");
          window.location.href = "/organization";  // é é¢è¦è¨˜å¾—åŠ æ–œç·š
        } else {
          alert("ç™»å…¥å¤±æ•—ï¼š" + result.message);
        }
      })
      .catch(err => {
        alert("ç³»çµ±éŒ¯èª¤ï¼Œè«‹ç¨å¾Œå†è©¦");
        console.error("ç™»å…¥éŒ¯èª¤ï¼š", err);
      });

        }

        }

    
  </script>
</body>
</html>