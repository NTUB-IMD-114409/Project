<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>會議寶｜重設密碼</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body { background-color: #f5f8fa; font-family: 'Arial', sans-serif; }
  </style>
</head>
<body class="flex items-center justify-center min-h-screen">
  <div class="bg-[#cedfe4] px-10 py-10 rounded-3xl shadow-md w-full max-w-md">
    <h2 class="text-3xl font-bold mb-8 text-center text-[#205f72]">重設密碼</h2>
    <form onsubmit="handleReset(event)">
      <div class="mb-4">
        <label class="block font-bold mb-1">新密碼</label>
        <input id="newPassword" type="password" placeholder="需包含英文大小寫與數字，至少 8 碼"
               class="w-full p-3 rounded-lg border border-gray-300 focus:outline-none"/>
        <p id="newPasswordError" class="text-sm text-red-600 mt-1"></p>
      </div>
      <div class="mb-6">
        <label class="block font-bold mb-1">確認密碼</label>
        <input id="confirmPassword" type="password" placeholder="請再次輸入新密碼"
               class="w-full p-3 rounded-lg border border-gray-300 focus:outline-none"/>
        <p id="confirmPasswordError" class="text-sm text-red-600 mt-1"></p>
      </div>
      <button type="submit"
              class="w-full bg-[#205f72] hover:bg-[#175c71] text-white py-3 text-lg rounded-lg">
        確認重設
      </button>
    </form>
  </div>
  <script>
    function handleReset(event) {
      event.preventDefault();
      const pw = document.getElementById("newPassword");
      const confirm = document.getElementById("confirmPassword");
      const pwError = document.getElementById("newPasswordError");
      const confirmError = document.getElementById("confirmPasswordError");

      pwError.textContent = "";
      confirmError.textContent = "";

      const pwPattern = /^(?=.*[a-z])(?=.*[A-Z])(?=.*\d).{8,}$/;
      let valid = true;

      if (!pw.value) {
        pwError.textContent = "請輸入新密碼";
        valid = false;
      } else if (!pwPattern.test(pw.value)) {
        pwError.textContent = "密碼格式錯誤，請確認條件是否符合";
        valid = false;
      }

      if (!confirm.value) {
        confirmError.textContent = "請再次輸入密碼";
        valid = false;
      } else if (pw.value !== confirm.value) {
        confirmError.textContent = "兩次輸入的密碼不一致";
        valid = false;
      }

      if (valid) {
        alert("密碼已成功重設！");
        window.location.href = "member_sign_in.html";
      }
    }
  </script>
</body>
</html>